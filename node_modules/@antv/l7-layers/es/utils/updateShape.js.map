{"version":3,"sources":["../../src/utils/updateShape.ts"],"names":["shapeUpdateList","updateShape","layer","lastShape","currentShape","type","dataState","dataSourceNeedUpdate","map","shapes","includes"],"mappings":"AAGA,IAAMA,eAAe,GAAG,CAEtB,CAAC,QAAD,EAAW,UAAX,CAFsB,EAGtB,CAAC,QAAD,EAAW,UAAX,CAHsB,EAItB,CAAC,UAAD,EAAa,UAAb,CAJsB,EAKtB,CAAC,UAAD,EAAa,UAAb,CALsB,EAMtB,CAAC,SAAD,EAAY,UAAZ,CANsB,EAOtB,CAAC,SAAD,EAAY,UAAZ,CAPsB,EAQtB,CAAC,UAAD,EAAa,UAAb,CARsB,EAStB,CAAC,SAAD,EAAY,UAAZ,CATsB,EAUtB,CAAC,QAAD,EAAW,UAAX,CAVsB,CAAxB;AAYA,OAAO,SAASC,WAAT,CACLC,KADK,EAELC,SAFK,EAGLC,YAHK,EAIC;AACN,MACE,OAAOD,SAAP,KAAqB,QAArB,IACA,OAAOC,YAAP,KAAwB,QADxB,IAEAD,SAAS,KAAKC,YAHhB,EAIE;AACA,QAAIF,KAAK,CAACG,IAAN,KAAe,YAAnB,EAAiC;AAC/BH,MAAAA,KAAK,CAACI,SAAN,CAAgBC,oBAAhB,GAAuC,IAAvC;AACA;AACD;;AAEDP,IAAAA,eAAe,CAACQ,GAAhB,CAAoB,UAACC,MAAD,EAAY;AAC9B,UAAIA,MAAM,CAACC,QAAP,CAAgBP,SAAhB,KAA8BM,MAAM,CAACC,QAAP,CAAgBN,YAAhB,CAAlC,EAAiE;AAE/DF,QAAAA,KAAK,CAACI,SAAN,CAAgBC,oBAAhB,GAAuC,IAAvC;AACA;AACD;AACF,KAND;AAOD;AACF","sourcesContent":["import { ILayer, StyleAttributeField } from '@antv/l7-core';\n// TODO: shapeUpdateList 存储一系列的 shape 类型\n// 当这一系列的 shape 相互切换的时候需要重构 layer 的 model (顶点数据集)\nconst shapeUpdateList = [\n  // PointLayer\n  ['circle', 'cylinder'],\n  ['square', 'cylinder'],\n  ['triangle', 'cylinder'],\n  ['pentagon', 'cylinder'],\n  ['hexagon', 'cylinder'],\n  ['octogon', 'cylinder'],\n  ['hexagram', 'cylinder'],\n  ['rhombus', 'cylinder'],\n  ['vesica', 'cylinder'],\n];\nexport function updateShape(\n  layer: ILayer,\n  lastShape: StyleAttributeField | undefined,\n  currentShape: StyleAttributeField | undefined,\n): void {\n  if (\n    typeof lastShape === 'string' &&\n    typeof currentShape === 'string' &&\n    lastShape !== currentShape\n  ) {\n    if (layer.type === 'PointLayer') {\n      layer.dataState.dataSourceNeedUpdate = true;\n      return;\n    }\n\n    shapeUpdateList.map((shapes) => {\n      if (shapes.includes(lastShape) && shapes.includes(currentShape)) {\n        // TODO: dataSourceNeedUpdate 借用数据更新时更新 layer model 的工作流\n        layer.dataState.dataSourceNeedUpdate = true;\n        return;\n      }\n    });\n  }\n}\n"],"file":"updateShape.js"}